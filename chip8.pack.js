l=[...'x123qweasdzc4rfv'];m=[240,144,144,144,240,32,96,32,32,112,240,16,240,128,240,240,16,240,16,240,144,144,240,16,16,240,128,240,16,240,240,128,240,144,240,240,16,32,64,64,240,144,240,144,240,240,144,240,16,240,240,144,240,144,144,224,144,224,144,224,240,128,128,128,240,224,144,144,144,224,240,128,240,128,240,240,128,240,128,128].concat([...Array(4016)].fill(0));q=m.slice(80,96);M=m.slice(80,2128);m.splice(512,0,...[...atob(location.search.slice(1))].map(d => d.charCodeAt(0)));k=C=T=n=f=S=0;F=h=[];H=512;onkeyup=e=>{i=l.indexOf(e.key);h[i]=0;n&&(q[x]=i,n=0)};onkeydown=e=>h[l.indexOf(e.key)]=1;L=r=>{requestAnimationFrame(L);for(i=0;i< 9;i++) {if (!n) {switch(O = m[H] << 8 | m[H + 1], x = (O & 3840) >> 8, y = (O & 240) >> 4, z = O & 15, p = O & 255, o = O & 4095, H += 2, O & 61440) {case 0:224 == O ? M = [...Array(2048)].fill(0) : 238 == O && (H = F[--f]);break;case 4096:H = o;break;case 8192:F[f] = H, f++, H = o;case 12288:q[x] == p && (H += 2);break;case 16384:q[x] != p && (H += 2);break;case 20480:q[x] == q[y] && (H += 2);break;case 24576:q[x] = p;break;case 28672:q[x] = (p + q[x]) % 256;break;case 32768:switch(z) {case 0:q[x] = q[y];break;case 1:q[x] |= q[y];break;case 2:q[x] &= q[y];break;case 3:q[x] ^= q[y];break;case 4:q[x] += q[y];q[15] = +(255 < q[x]);q[x] %= 256;break;case 5:q[15] = +(q[x] > q[y]);q[x] -= q[y];0 > q[x] && (q[x] += 256);break;case 6:q[15] = q[x] & 1;q[x] >>= 1;break;case 7:q[15] = +(q[y] > q[x]);q[x] = q[y] - q[x];0 > q[x] && (q[x] += 256);break;case 14:q[15] = +(q[x] & 128), q[x] *= 2, q[x] %= 256;}break;case 36864:q[x] != q[y] && (H += 2);break;case 40960:k = o;break;case 45056:H = o + q[0];break;case 49152:q[x] = (0 | 255 * Math.random()) & p;break;case 53248:q[15] = 0;m.slice(k, z + k).map((a, b) => {for (j = 0; 8 > j; j++) {0 < (a & 128) && (x0 = q[x] + j, y0 = q[y] + b, loc = (0 > x0 ? x0 + 64 : x0 % 64) + 64 * (0 > y0 ? y0 + 32 : y0 % 32), M[loc] ^= 1, M[loc] || (q[15] = 1)), a <<= 1;}});break;case 57344:switch(p) {case 158:h[q[x]] && (H += 2);break;case 161:h[q[x]] || (H += 2);}break;case 61440:switch(p) {case 7:q[x] = C;break;case 10:n = 1;return;case 21:C = q[x];break;case 24:T = q[x];break;case 30:k += q[x];break;case 41:k = 5 * q[x];break;case 51:m.splice(k,3,...(''+q[x]).padStart(3,0).split``.map(d=>+d));break;case 85:for (i = 0; i <= x; i++) {m[k + i] = q[i];}break;case 101:for (i = 0; i <= x; i++) {q[i] = m[k + i];}}}}}c=a=>a+a&&[a.splice(0,64).map(d=>d?'░░':'██').join``,...c(a)];document.body.innerHTML='<pre>'+c([...M]).join`\n`;C&&C--;T?(T--,S||(A=new AudioContext,S=A.createOscillator(),S.connect(A.destination),S.start())):S&&(S.stop(),S=0)};L()
